{"version":3,"sources":["node_modules/browser-pack/_prelude.js","assets/js/main.js","assets/js/modules/core.js","assets/js/modules/events.js","assets/js/modules/logger.js","assets/js/modules/navigation.js","assets/js/theme.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","'use strict';\n\nimport { Core } from \"./modules/core.js\";\nimport { initNavigation } from \"./modules/navigation.js\";\nimport { Theme } from \"./theme.js\";\nimport { log } from \"./modules/logger.js\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  document.documentElement.classList.add(\"ready\");\n\n  log.info(\"Sistema iniciado\");\n\n  Core.init();\n  Theme.init();\n  initNavigation();\n\n  // ---------------------------------------------------------\n  // Função de scroll suave com easing\n  // ---------------------------------------------------------\n  const smoothScrollTo = (targetY, duration = 900) => {\n    const startY = window.scrollY;\n    const diff = targetY - startY;\n    let start;\n\n    const step = (timestamp) => {\n      if (!start) start = timestamp;\n      const time = timestamp - start;\n      const percent = Math.min(time / duration, 1);\n\n      // Ease-out cubic\n      const easing = 1 - Math.pow(1 - percent, 3);\n\n      window.scrollTo(0, startY + diff * easing);\n\n      if (time < duration) requestAnimationFrame(step);\n    };\n\n    requestAnimationFrame(step);\n  };\n\n  // ---------------------------------------------------------\n  // Smooth Reveal da section-home + esconder hero\n  // ---------------------------------------------------------\n  const exploreBtn = document.querySelector(\".hero_btn\");\n  const homeSection = document.querySelector(\"#home\");\n  const hero = document.querySelector(\".hero\");\n  const header = document.querySelector(\".site-header\");\n\n  if (exploreBtn && homeSection && hero) {\n    exploreBtn.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n\n      // esconder hero\n      hero.classList.add(\"hidden\");\n      exploreBtn.classList.add(\"hidden\");\n\n      // mostrar home\n      homeSection.classList.add(\"visible\");\n\n      // compensar header fixo\n      const headerHeight = header.offsetHeight;\n\n      // destino real\n      const targetY =\n        homeSection.getBoundingClientRect().top +\n        window.scrollY -\n        headerHeight;\n\n      // scroll suave\n      smoothScrollTo(targetY, 2000);\n    });\n  }\n\n  log.info(\"Document ready for code injection\");\n});\n","import { log } from \"./logger.js\";\n\nexport const Core = {\n  frases: [\n    \"A mente que se abre a uma nova ideia jamais volta ao seu tamanho original.\",\n    \"O código é poesia.\",\n    \"Cada ritual técnico é um passo para a autonomia.\",\n    \"A arquitetura é o destino do software.\"\n  ],\n\n  getRandomFrase() {\n    const i = Math.floor(Math.random() * this.frases.length);\n    return this.frases[i];\n  },\n\n  init() {\n    const frase = this.getRandomFrase();\n    log.info(`Core initialized → ${frase}`);\n  }\n};\n\n","export const Events = {\n  events: {},\n\n  on(event, handler) {\n    if (!this.events[event]) this.events[event] = [];\n    this.events[event].push(handler);\n  },\n\n  emit(event, data) {\n    if (!this.events[event]) return;\n    this.events[event].forEach(handler => handler(data));\n  }\n};\n\n","// modules/logger.js\n\nfunction timestamp() {\n  return new Date().toLocaleTimeString(\"pt-PT\");\n}\n\nexport const log = {\n  info(msg) {\n    console.info(`[INFO ${timestamp()}] ${msg}`);\n  },\n\n  warn(msg) {\n    console.warn(`[WARN ${timestamp()}] ${msg}`);\n  },\n\n  error(msg) {\n    console.error(`[ERROR ${timestamp()}] ${msg}`);\n  },\n\n  debug(msg) {\n    if (window.env === \"development\") {\n      console.debug(`[DEBUG ${timestamp()}] ${msg}`);\n    }\n  }\n};\n","import { Theme } from \"../theme.js\";\nimport { log } from \"./logger.js\";\n\nexport function initNavigation() {\n  const menuBtn = document.querySelector(\".menu-btn\");\n  const nav = document.querySelector(\".menu-nav\");\n\n  if (!menuBtn || !nav) {\n    log.warn(\"NAV não encontrada no DOM\");\n    return;\n  }\n\n  // Hambúrguer\n  menuBtn.addEventListener(\"click\", () => {\n    nav.classList.toggle(\"open\");\n    menuBtn.classList.toggle(\"open\");\n  });\n\n  // Dropdown de temas\n  const themeLinks = document.querySelectorAll(\".dropdown-menu a\");\n\n  themeLinks.forEach(link => {\n    link.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      const theme = link.textContent.trim();\n      Theme.apply(theme);\n    });\n  });\n\n  log.info(\"NAV inicializada\");\n}\n","'use strict';\n\nimport { Events } from \"./modules/events.js\";\nimport { log } from \"./modules/logger.js\";\n\nexport const Theme = {\n  key: \"sk-theme\",\n\n  get() {\n    return localStorage.getItem(this.key) || \"dark\";\n  },\n\n  apply(theme) {\n    const themes = [\n      \"light-theme\", \"dark-theme\", \"solarized-theme\", \n      \"dracula-theme\", \"hydra-theme\", \"neon-theme\"\n    ];\n\n    document.documentElement.classList.remove(...themes);\n    document.documentElement.classList.add(`${theme}-theme`);\n    localStorage.setItem(this.key, theme);\n\n    const el = document.querySelector(\".hero_description--last\");\n    if (el) {\n      el.classList.remove(\"animate\");\n      void el.offsetWidth; // força reflow\n      el.classList.add(\"animate\");\n    }\n\n    Events.emit(\"themeChanged\", theme);\n    log.info(`Tema aplicado: ${theme}`);\n  },\n\n  init() {\n    const saved = this.get();\n    this.apply(saved);\n    log.info(\"Sistema de temas inicializado\");\n  }\n};\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvanMvbWFpbi5qcyIsImFzc2V0cy9qcy9tb2R1bGVzL2NvcmUuanMiLCJhc3NldHMvanMvbW9kdWxlcy9ldmVudHMuanMiLCJhc3NldHMvanMvbW9kdWxlcy9sb2dnZXIuanMiLCJhc3NldHMvanMvbW9kdWxlcy9uYXZpZ2F0aW9uLmpzIiwiYXNzZXRzL2pzL3RoZW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsWUFBWTs7QUFFWixJQUFBLEtBQUEsR0FBQSxPQUFBO0FBQ0EsSUFBQSxXQUFBLEdBQUEsT0FBQTtBQUNBLElBQUEsTUFBQSxHQUFBLE9BQUE7QUFDQSxJQUFBLE9BQUEsR0FBQSxPQUFBO0FBRUEsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLFlBQU07RUFDbEQsUUFBUSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQztFQUUvQyxXQUFHLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDO0VBRTVCLFVBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUNYLFlBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUNaLElBQUEsMEJBQWMsRUFBQyxDQUFDOztFQUVoQjtFQUNBO0VBQ0E7RUFDQSxJQUFNLGNBQWMsR0FBRyxTQUFqQixjQUFjLENBQUksT0FBTyxFQUFxQjtJQUFBLElBQW5CLFFBQVEsR0FBQSxTQUFBLENBQUEsTUFBQSxRQUFBLFNBQUEsUUFBQSxTQUFBLEdBQUEsU0FBQSxNQUFHLEdBQUc7SUFDN0MsSUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU87SUFDN0IsSUFBTSxJQUFJLEdBQUcsT0FBTyxHQUFHLE1BQU07SUFDN0IsSUFBSSxLQUFLO0lBRVQsSUFBTSxLQUFJLEdBQUcsU0FBUCxJQUFJLENBQUksU0FBUyxFQUFLO01BQzFCLElBQUksQ0FBQyxLQUFLLEVBQUUsS0FBSyxHQUFH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QUFtQixLQUFLLENBQUUsQ0FBQztFQUNyQyxDQUFDO0VBRUQsSUFBSSxXQUFKLElBQUksQ0FBQSxFQUFHO0lBQ0wsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3hCLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQ2pCLFdBQUcsQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUM7RUFDM0M7QUFDRixDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBDb3JlIH0gZnJvbSBcIi4vbW9kdWxlcy9jb3JlLmpzXCI7XG5pbXBvcnQgeyBpbml0TmF2aWdhdGlvbiB9IGZyb20gXCIuL21vZHVsZXMvbmF2aWdhdGlvbi5qc1wiO1xuaW1wb3J0IHsgVGhlbWUgfSBmcm9tIFwiLi90aGVtZS5qc1wiO1xuaW1wb3J0IHsgbG9nIH0gZnJvbSBcIi4vbW9kdWxlcy9sb2dnZXIuanNcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInJlYWR5XCIpO1xuXG4gIGxvZy5pbmZvKFwiU2lzdGVtYSBpbmljaWFkb1wiKTtcblxuICBDb3JlLmluaXQoKTtcbiAgVGhlbWUuaW5pdCgpO1xuICBpbml0TmF2aWdhdGlvbigpO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBGdW7Dp8OjbyBkZSBzY3JvbGwgc3VhdmUgY29tIGVhc2luZ1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3Qgc21vb3RoU2Nyb2xsVG8gPSAodGFyZ2V0WSwgZHVyYXRpb24gPSA5MDApID0+IHtcbiAgICBjb25zdCBzdGFydFkgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICBjb25zdCBkaWZmID0gdGFyZ2V0WSAtIHN0YXJ0WTtcbiAgICBsZXQgc3RhcnQ7XG5cbiAgICBjb25zdCBzdGVwID0gKHRpbWVzdGFtcCkgPT4ge1xuICAgICAgaWYgKCFzdGFydCkgc3RhcnQgPSB0aW1lc3RhbXA7XG4gICAgICBjb25zdCB0aW1lID0gdGltZXN0YW1wIC0gc3RhcnQ7XG4gICAgICBjb25zdCBwZXJjZW50ID0gTWF0aC5taW4odGltZSAvIGR1cmF0aW9uLCAxKTtcblxuICAgICAgLy8gRWFzZS1vdXQgY3ViaWNcbiAgICAgIGNvbnN0IGVhc2luZyA9IDEgLSBNYXRoLnBvdygxIC0gcGVyY2VudCwgMyk7XG5cbiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzdGFydFkgKyBkaWZmICogZWFzaW5nKTtcblxuICAgICAgaWYgKHRpbWUgPCBkdXJhdGlvbikgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuICAgIH07XG5cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gIH07XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFNtb290aCBSZXZlYWwgZGEgc2VjdGlvbi1ob21lICsgZXNjb25kZXIgaGVyb1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29uc3QgZXhwbG9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVyb19idG5cIik7XG4gIGNvbnN0IGhvbWVTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNob21lXCIpO1xuICBjb25zdCBoZXJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZXJvXCIpO1xuICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtaGVhZGVyXCIpO1xuXG4gIGlmIChleHBsb3JlQnRuICYmIGhvbWVTZWN0aW9uICYmIGhlcm8pIHtcbiAgICBleHBsb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAvLyBlc2NvbmRlciBoZXJvXG4gICAgICBoZXJvLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICBleHBsb3JlQnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG5cbiAgICAgIC8vIG1vc3RyYXIgaG9tZVxuICAgICAgaG9tZVNlY3Rpb24uY2xhc3NMaXN0LmFkZChcInZpc2libGVcIik7XG5cbiAgICAgIC8vIGNvbXBlbnNhciBoZWFkZXIgZml4b1xuICAgICAgY29uc3QgaGVhZGVySGVpZ2h0ID0gaGVhZGVyLm9mZnNldEhlaWdodDtcblxuICAgICAgLy8gZGVzdGlubyByZWFsXG4gICAgICBjb25zdCB0YXJnZXRZID1cbiAgICAgICAgaG9tZVNlY3Rpb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICtcbiAgICAgICAgd2luZG93LnNjcm9sbFkgLVxuICAgICAgICBoZWFkZXJIZWlnaHQ7XG5cbiAgICAgIC8vIHNjcm9sbCBzdWF2ZVxuICAgICAgc21vb3RoU2Nyb2xsVG8odGFyZ2V0WSwgMjAwMCk7XG4gICAgfSk7XG4gIH1cblxuICBsb2cuaW5mbyhcIkRvY3VtZW50IHJlYWR5IGZvciBjb2RlIGluamVjdGlvblwiKTtcbn0pO1xuIiwiaW1wb3J0IHsgbG9nIH0gZnJvbSBcIi4vbG9nZ2VyLmpzXCI7XG5cbmV4cG9ydCBjb25zdCBDb3JlID0ge1xuICBmcmFzZXM6IFtcbiAgICBcIkEgbWVudGUgcXVlIHNlIGFicmUgYSB1bWEgbm92YSBpZGVpYSBqYW1haXMgdm9sdGEgYW8gc2V1IHRhbWFuaG8gb3JpZ2luYWwuXCIsXG4gICAgXCJPIGPDs2RpZ28gw6kgcG9lc2lhLlwiLFxuICAgIFwiQ2FkYSByaXR1YWwgdMOpY25pY28gw6kgdW0gcGFzc28gcGFyYSBhIGF1dG9ub21pYS5cIixcbiAgICBcIkEgYXJxdWl0ZXR1cmEgw6kgbyBkZXN0aW5vIGRvIHNvZnR3YXJlLlwiXG4gIF0sXG5cbiAgZ2V0UmFuZG9tRnJhc2UoKSB7XG4gICAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuZnJhc2VzLmxlbmd0aCk7XG4gICAgcmV0dXJuIHRoaXMuZnJhc2VzW2ldO1xuICB9LFxuXG4gIGluaXQoKSB7XG4gICAgY29uc3QgZnJhc2UgPSB0aGlzLmdldFJhbmRvbUZyYXNlKCk7XG4gICAgbG9nLmluZm8oYENvcmUgaW5pdGlhbGl6ZWQg4oaSICR7ZnJhc2V9YCk7XG4gIH1cbn07XG5cbiIsImV4cG9ydCBjb25zdCBFdmVudHMgPSB7XG4gIGV2ZW50czoge30sXG5cbiAgb24oZXZlbnQsIGhhbmRsZXIpIHtcbiAgICBpZiAoIXRoaXMuZXZlbnRzW2V2ZW50XSkgdGhpcy5ldmVudHNbZXZlbnRdID0gW107XG4gICAgdGhpcy5ldmVudHNbZXZlbnRdLnB1c2goaGFuZGxlcik7XG4gIH0sXG5cbiAgZW1pdChldmVudCwgZGF0YSkge1xuICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSByZXR1cm47XG4gICAgdGhpcy5ldmVudHNbZXZlbnRdLmZvckVhY2goaGFuZGxlciA9PiBoYW5kbGVyKGRhdGEpKTtcbiAgfVxufTtcblxuIiwiLy8gbW9kdWxlcy9sb2dnZXIuanNcblxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICByZXR1cm4gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoXCJwdC1QVFwiKTtcbn1cblxuZXhwb3J0IGNvbnN0IGxvZyA9IHtcbiAgaW5mbyhtc2cpIHtcbiAgICBjb25zb2xlLmluZm8oYFtJTkZPICR7dGltZXN0YW1wKCl9XSAke21zZ31gKTtcbiAgfSxcblxuICB3YXJuKG1zZykge1xuICAgIGNvbnNvbGUud2FybihgW1dBUk4gJHt0aW1lc3RhbXAoKX1dICR7bXNnfWApO1xuICB9LFxuXG4gIGVycm9yKG1zZykge1xuICAgIGNvbnNvbGUuZXJyb3IoYFtFUlJPUiAke3RpbWVzdGFtcCgpfV0gJHttc2d9YCk7XG4gIH0sXG5cbiAgZGVidWcobXNnKSB7XG4gICAgaWYgKHdpbmRvdy5lbnYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAgICAgY29uc29sZS5kZWJ1ZyhgW0RFQlVHICR7dGltZXN0YW1wKCl9XSAke21zZ31gKTtcbiAgICB9XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBUaGVtZSB9IGZyb20gXCIuLi90aGVtZS5qc1wiO1xuaW1wb3J0IHsgbG9nIH0gZnJvbSBcIi4vbG9nZ2VyLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0TmF2aWdhdGlvbigpIHtcbiAgY29uc3QgbWVudUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1idG5cIik7XG4gIGNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1uYXZcIik7XG5cbiAgaWYgKCFtZW51QnRuIHx8ICFuYXYpIHtcbiAgICBsb2cud2FybihcIk5BViBuw6NvIGVuY29udHJhZGEgbm8gRE9NXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEhhbWLDunJndWVyXG4gIG1lbnVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBuYXYuY2xhc3NMaXN0LnRvZ2dsZShcIm9wZW5cIik7XG4gICAgbWVudUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwib3BlblwiKTtcbiAgfSk7XG5cbiAgLy8gRHJvcGRvd24gZGUgdGVtYXNcbiAgY29uc3QgdGhlbWVMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJvcGRvd24tbWVudSBhXCIpO1xuXG4gIHRoZW1lTGlua3MuZm9yRWFjaChsaW5rID0+IHtcbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgdGhlbWUgPSBsaW5rLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgIFRoZW1lLmFwcGx5KHRoZW1lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgbG9nLmluZm8oXCJOQVYgaW5pY2lhbGl6YWRhXCIpO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBFdmVudHMgfSBmcm9tIFwiLi9tb2R1bGVzL2V2ZW50cy5qc1wiO1xuaW1wb3J0IHsgbG9nIH0gZnJvbSBcIi4vbW9kdWxlcy9sb2dnZXIuanNcIjtcblxuZXhwb3J0IGNvbnN0IFRoZW1lID0ge1xuICBrZXk6IFwic2stdGhlbWVcIixcblxuICBnZXQoKSB7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5KSB8fCBcImRhcmtcIjtcbiAgfSxcblxuICBhcHBseSh0aGVtZSkge1xuICAgIGNvbnN0IHRoZW1lcyA9IFtcbiAgICAgIFwibGlnaHQtdGhlbWVcIiwgXCJkYXJrLXRoZW1lXCIsIFwic29sYXJpemVkLXRoZW1lXCIsIFxuICAgICAgXCJkcmFjdWxhLXRoZW1lXCIsIFwiaHlkcmEtdGhlbWVcIiwgXCJuZW9uLXRoZW1lXCJcbiAgICBdO1xuXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoLi4udGhlbWVzKTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChgJHt0aGVtZX0tdGhlbWVgKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmtleSwgdGhlbWUpO1xuXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlcm9fZGVzY3JpcHRpb24tLWxhc3RcIik7XG4gICAgaWYgKGVsKSB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKFwiYW5pbWF0ZVwiKTtcbiAgICAgIHZvaWQgZWwub2Zmc2V0V2lkdGg7IC8vIGZvcsOnYSByZWZsb3dcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJhbmltYXRlXCIpO1xuICAgIH1cblxuICAgIEV2ZW50cy5lbWl0KFwidGhlbWVDaGFuZ2VkXCIsIHRoZW1lKTtcbiAgICBsb2cuaW5mbyhgVGVtYSBhcGxpY2FkbzogJHt0aGVtZX1gKTtcbiAgfSxcblxuICBpbml0KCkge1xuICAgIGNvbnN0IHNhdmVkID0gdGhpcy5nZXQoKTtcbiAgICB0aGlzLmFwcGx5KHNhdmVkKTtcbiAgICBsb2cuaW5mbyhcIlNpc3RlbWEgZGUgdGVtYXMgaW5pY2lhbGl6YWRvXCIpO1xuICB9XG59O1xuIl19"}